(function(){function A(a,c){var d=a.innerWidth(),b=a.innerHeight(),g=c.outerWidth()/d;c.outerHeight();if(null==g||null==d)return alert("Eita, deu erro. :("),B++,!1;if(1>=g)for(;c.outerWidth()<d;)e++,a.css("font-size",e+"px"),c.css("font-size",e+"px");else for(;c.outerWidth()>d;)e--,a.css("font-size",e+"px"),c.css("font-size",e+"px");for(;c.outerHeight()>b;)e--,a.css("font-size",e+"px"),c.css("font-size",e+"px");c.css("top",(b-c.outerHeight())/2);c.css("left",(d-c.outerWidth())/2);return!0}function f(){$("#bloco").removeClass();
$("#bloco").addClass(l).addClass(m).addClass(n).addClass("").addClass(u).addClass(p).addClass(q)}function h(a,c){a.text($("label."+c).text()).removeClass().addClass(c).addClass("escolhido")}function y(a){$("#descricao_imagem_fb").val();$("#objetos_compartilha").slideUp();1==a&&$("#comentario").slideUp()}function k(a,c,d,b,g){null!=g?c.removeClass().text(a).addClass(d).slideDown(200,g()):(c.removeClass().text(a).addClass(d).slideDown(),0<b&&c.delay(b).slideUp())}var z={stringToBinaryArray:function(a){return Array.prototype.map.call(a,
function(a){return a.charCodeAt(0)&255})},base64ToString:function(a){return atob(a)}},n="work_sans",m="forca_normal",l="escrita_maiuscula",u="bg_circles_light",p="form_quadrado",r="borda_sem",q="alinhamento_esquerda",v="",e=120,t=$("#contador"),w=$("<span/>").append($("<em/>").text("Carregando...")).css("display","none"),B=0;$("#imagem_final").attr("src","");f();$("#bloco").append(w);$("#"+n).attr("checked","checked");$("#"+m).attr("checked","checked");$("#"+l).attr("checked","checked");t.text("0/180");
$("#btn_gera_imagem").on("click",function(){var a=$("#bloco"),c=$("#bloco a"),d=$("#onde"),b=$("#texto");if(""!=b.val()){a.css("display","table-cell");y(!0);d.text("");b=b.val();b=b.replace(/\n/g,"<br/>");b=b.replace(/' '/g,"&nbsp;");b=b.replace(/-----/g,"<hr/>");var g=b.indexOf("#"),e=b.lastIndexOf("#");if(g!=e){var f=b.substring(0,g);f=f+'<span class="inverte">'+b.substring(g+1,e);b=f=f+"</span>"+b.substring(e+1,b.length)}b=b.replace(/<3/g,"&#9829;");b=b.replace(/<\/3/g,"&#128148;").replace(/<,3/g,
"&#128148;");b=b.replace(/:\)/g,"&#9786;");b=b.replace(/:\(/g,"&#9785;");d.html(b);w.fadeIn();A(c,d)&&html2canvas(a,{background:"#fff",logging:!1,onrendered:function(a){v=a.toDataURL("image/png",.9);$("#imagem_final").attr("src",v);$("#imagem_final").css("display","block");$("#comentario").fadeIn()}});w.fadeOut();a.css("display","none");console.log("Posi\u00e7\u00e3o imagem: "+$("#ponto_imagem").offset().top);$("html, body").animate({scrollTop:$("#ponto_imagem").offset().top},500)}});$("input").on("click",
function(){$("#onde").text("");"fonte"==$(this).attr("name")&&(n=$(this).val(),f(),h($("#fonte_escolhida"),n));"forca"==$(this).attr("name")&&(m=$(this).val(),f(),h($("#forca_escolhida"),m));"escrita"==$(this).attr("name")&&(l=$(this).val(),f(),h($("#escrita_escolhida"),l));"background"==$(this).attr("name")&&(u=$(this).val(),f(),h($("#fundo_escolhida"),u));"formato"==$(this).attr("name")&&(p=$(this).val(),$("#imagem_final").removeClass().addClass(p),f(),h($("#formato_escolhida"),p));if("borda"==
$(this).attr("name")){r=$(this).val();var a=$("#bloco a"),c=r;a.removeClass();a.addClass(c);h($("#borda_escolhida"),r);"borda_com"==r?(a=$("#marca"),a.removeClass(),a.addClass("space_mono marca_com_borda"),$("#informa_borda").fadeIn().delay(8E3).slideUp()):(a=$("#marca"),a.removeClass(),a.addClass("space_mono marca_sem_borda"))}"alinhamento"==$(this).attr("name")&&(q=$(this).val(),$("#imagem_final").removeClass().addClass(q),f(),h($("#alinhamento_escolhido"),q));"exibe_marca"==$(this).attr("name")&&
($(this).prop("checked")?$("#marca").hide():$("#marca").show())});$("textarea").on("input",function(){var a=$(this).val();180<a.length?(a=a.slice(0,180),$(this).val(a),$(this).addClass("alerta_erro"),t.text("Sem text\u00e3o!!").fadeOut(2500,function(){t.text(a.length+"/180")}).fadeIn(300,function(){$("textarea").removeClass("alerta_erro")})):t.text(a.length+"/180")});var x=!1;$("#det_coisas_legais").on("click",function(){x?($("#coisas_legais").slideUp(),$(this).text("Ah, olha o que da pra fazer de legal!")):
($("#coisas_legais").slideDown(),$(this).text("Bacana n\u00e9? [clique aqui para esconder]"));x=!x});$(".opc").on("click",function(){var a=$(this).attr("id");"none"==$("."+a).css("display")?$("."+a).slideDown():$("."+a).slideUp()});(function(){var a;for(a=1;2>=a;a++)$(".img_ex"+a).attr("src","img/ex"+a+".jpg")})();$("#inicia_compartilhar_facebook").on("click",function(){$("#objetos_compartilha").slideDown()});$("#envia_imagem_facebook").on("click",function(){var a=$("#informa_compartilha"),c=$("#informa_msg");
FB.login(function(d){d.authResponse?FB.api("/me",function(b){var d=FB.getAuthResponse();null!=d?k("Enviando imagem para o Facebook. Aguarde, por favor.",c,"informa_msg",0,function(){if(-1!=d.grantedScopes.search(/publish_actions/)){var b=v.replace(/^data:image\/(png|jpe?g);base64,/,"");b=z.base64ToString(b);var c="";$("#descricao_imagem_fb")&&(c=$("#descricao_imagem_fb").val());var e={url:"https://graph.facebook.com/me/photos",type:"POST",cache:!1,success:function(a){},error:function(a){},processData:!1,
xhr:function(){var a=$.ajaxSettings.xhr();a.send=function(a){a=z.stringToBinaryArray(a);XMLHttpRequest.prototype.send.call(this,(new Uint8Array(a)).buffer)};return a}},f=function(a,b){var c="";$.each(a,function(a,d){c+="--"+b+"\r\n";d.dataString?(c+="Content-Disposition: form-data; name='"+a+"'; filename='"+d.name+"'\r\n",c+="Content-Type: "+d.type+"\r\n\r\n",c+=d.dataString+"\r\n"):(c+="Content-Disposition: form-data; name='"+a+"';\r\n\r\n",c+=d+"\r\n")});return c+="--"+b+"--"};(function(a){var b=
$.extend({},e,a.call);b.url+="?access_token="+a.fb.accessToken;var c="separator de campo "+Math.random();b.data=f(a.fb,c);b.contentType="multipart/form-data; boundary="+c;$.ajax(b)})({fb:{caption:c,accessToken:FB.getAccessToken(),file:{name:"sua_mensagem.png",type:"image/png",dataString:b}},call:{url:"https://graph.facebook.com/me/photos",success:function(b){k("Imagem compartilhada!!",a,"informa",8E3);y(!1)},error:function(b){k("Ocorreu um erro ao compartilhar. :( Se estiver no celular, clique e segure na imagem para compartilhar diretamente pelo celular.",
a,"informa_erro",15E3)}}})}else k("Voc\u00ea n\u00e3o autorizou o Sua Mensagem a postar no seu perfil. Se desejar, clique novamente em Compartilhar Imagem.",a,"informa_atencao",12E3)}):k("Voc\u00ea n\u00e3o autorizou o Sua Mensagem a postar no seu perfil. Se desejar, clique novamente em Compartilhar Imagem.",a,"informa_atencao",12E3)}):k("Voc\u00ea n\u00e3o est\u00e1 logado no Facebook. Se desejar, clique novamente em Compartilhar Imagem.",a,"informa_atencao",12E3)},{scope:"publish_actions",return_scopes:!0})})})(self);