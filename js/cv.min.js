(function(){function B(a,c){var f=a.innerWidth(),b=a.innerHeight(),e=c.outerWidth()/f;c.outerHeight();if(null==e||null==f)return alert("Eita, deu erro. :("),C++,!1;console.log("winW: "+f);console.log("wRatio: "+e);console.log("outerWidth: "+c.outerWidth());console.log("outerHeight: "+c.outerHeight());if(1>=e){for(;c.outerWidth()<f;)console.log("outerWidth < winW"),d++,a.css("font-size",d+"px"),c.css("font-size",d+"px");for(;c.outerHeight()>b;)console.log("outerHeight > winH"),d--,a.css("font-size",
d+"px"),c.css("font-size",d+"px")}else{for(;c.outerWidth()>f;)console.log("fntSz--(1)"),d--,a.css("font-size",d+"px"),c.css("font-size",d+"px");for(;c.outerHeight()>b;)console.log("fntSz--(2)"),d--,a.css("font-size",d+"px"),c.css("font-size",d+"px")}c.css("top",(b-c.outerHeight())/2);c.css("left",(f-c.outerWidth())/2);console.log("FIM SCALE");return!0}function h(){$("#bloco").removeClass();$("#bloco").addClass(n).addClass(p).addClass(q).addClass(D).addClass(v).addClass(r).addClass(m)}function k(a,
c){a.text($("label."+c).text()).removeClass().addClass(c).addClass("escolhido")}function z(a){$("#descricao_imagem_fb").val();$("#objetos_compartilha").slideUp();1==a&&$("#comentario").slideUp()}function l(a,c,f,b,e){null!=e?c.removeClass().text(a).addClass(f).slideDown(200,e()):(c.removeClass().text(a).addClass(f).slideDown(),0<b&&c.delay(b).slideUp())}var A={stringToBinaryArray:function(a){return Array.prototype.map.call(a,function(a){return a.charCodeAt(0)&255})},base64ToString:function(a){return atob(a)}},
q="work_sans",p="forca_normal",n="escrita_maiuscula",D="sombra",v="bg_stardust",r="form_quadrado",t="borda_com",m="alinhamento_esquerda",w="",d=120,u=$("#contador"),x=$("<span/>").append($("<em/>").text("Carregando...")).css("display","none"),C=0;$("#imagem_final").attr("src","");h();$("#bloco").append(x);$("#"+q).attr("checked","checked");$("#"+p).attr("checked","checked");$("#"+n).attr("checked","checked");u.text("0/180");$("#btn_gera_imagem").on("click",function(){var a=$("#bloco"),c=$("#bloco a"),
f=$("#onde"),b=$("#texto");if(""!=b.val()){a.css("display","table-cell");z(!0);f.text("");b=b.val();b=b.replace(/\n/g,"<br/>");b=b.replace(/' '/g,"&nbsp;");b=b.replace(/-----/g,"<hr/>");var e=b.indexOf("#"),d=b.lastIndexOf("#");if(e!=d){var g=b.substring(0,e);g=g+'<span class="inverte">'+b.substring(e+1,d);b=g=g+"</span>"+b.substring(d+1,b.length)}e=b.indexOf("%");d=b.lastIndexOf("%");e!=d&&(g=b.substring(0,e),g=g+'<span class="texto_destacado_alinhado_centro">'+b.substring(e+1,d),b=g=g+"</span>"+
b.substring(d+1,b.length));b=b.replace(/<3/g,"&#9829;");b=b.replace(/<\/3/g,"&#128148;").replace(/<,3/g,"&#128148;");b=b.replace(/:\)/g,"&#9786;");b=b.replace(/:\(/g,"&#9785;");f.html(b);x.fadeIn();B(c,f)&&html2canvas(a,{background:"#fff",logging:!0,onrendered:function(a){w=a.toDataURL("image/png",.9);$("#imagem_final").attr("src",w);$("#comentario").fadeIn()}});x.fadeOut();$("html, body").animate({scrollTop:$("#ponto_imagem").offset().top},500)}});$("input").on("click",function(){$("#onde").text("");
"fonte"==$(this).attr("name")&&(q=$(this).val(),h(),k($("#fonte_escolhida"),q));"forca"==$(this).attr("name")&&(p=$(this).val(),h(),k($("#forca_escolhida"),p));"escrita"==$(this).attr("name")&&(n=$(this).val(),h(),k($("#escrita_escolhida"),n));"background"==$(this).attr("name")&&(v=$(this).val(),h(),k($("#fundo_escolhida"),v));"formato"==$(this).attr("name")&&(r=$(this).val(),$("#imagem_final").removeClass().addClass(r),h(),k($("#formato_escolhida"),r));if("borda"==$(this).attr("name")){t=$(this).val();
var a=$("#bloco a"),c=t;a.removeClass();a.addClass(c);k($("#borda_escolhida"),t);"borda_com"==t?(a=$("#marca"),a.removeClass(),a.addClass("space_mono marca_com_borda"),$("#informa_borda").fadeIn().delay(8E3).slideUp()):(a=$("#marca"),a.removeClass(),a.addClass("space_mono marca_sem_borda"))}"alinhamento"==$(this).attr("name")&&(m=$(this).val(),$("#imagem_final").removeClass().addClass(m),h(),k($("#alinhamento_escolhido"),m),console.log("Alinhamento: "+m));"exibe_marca"==$(this).attr("name")&&($(this).prop("checked")?
$("#marca").hide():$("#marca").show())});$("textarea").on("input",function(){var a=$(this).val();180<a.length?(a=a.slice(0,180),$(this).val(a),$(this).addClass("alerta_erro"),u.text("Sem text\u00e3o!!").fadeOut(2500,function(){u.text(a.length+"/180")}).fadeIn(300,function(){$("textarea").removeClass("alerta_erro")})):u.text(a.length+"/180")});var y=!1;$("#det_coisas_legais").on("click",function(){y?($("#coisas_legais").slideUp(),$(this).text("Ah, olha o que da pra fazer de legal!")):($("#coisas_legais").slideDown(),
$(this).text("Bacana n\u00e9? [clique aqui para esconder]"));y=!y});$(".opc").on("click",function(){var a=$(this).attr("id");"none"==$("."+a).css("display")?$("."+a).slideDown():$("."+a).slideUp()});(function(){var a;for(a=1;2>=a;a++)$(".img_ex"+a).attr("src","img/ex"+a+".jpg")})();$("#inicia_compartilhar_facebook").on("click",function(){$("#objetos_compartilha").slideDown()});$("#envia_imagem_facebook").on("click",function(){var a=$("#informa_compartilha"),c=$("#informa_msg");FB.login(function(d){d.authResponse?
FB.api("/me",function(b){var d=FB.getAuthResponse();null!=d?l("Enviando imagem para o Facebook. Aguarde, por favor.",c,"informa_msg",0,function(){if(-1!=d.grantedScopes.search(/publish_actions/)){var b=w.replace(/^data:image\/(png|jpe?g);base64,/,"");b=A.base64ToString(b);var c="";$("#descricao_imagem_fb")&&(c=$("#descricao_imagem_fb").val());var e={url:"https://graph.facebook.com/me/photos",type:"POST",cache:!1,success:function(a){},error:function(a){},processData:!1,xhr:function(){var a=$.ajaxSettings.xhr();
a.send=function(a){a=A.stringToBinaryArray(a);XMLHttpRequest.prototype.send.call(this,(new Uint8Array(a)).buffer)};return a}},f=function(a,b){var c="";$.each(a,function(a,d){c+="--"+b+"\r\n";d.dataString?(c+="Content-Disposition: form-data; name='"+a+"'; filename='"+d.name+"'\r\n",c+="Content-Type: "+d.type+"\r\n\r\n",c+=d.dataString+"\r\n"):(c+="Content-Disposition: form-data; name='"+a+"';\r\n\r\n",c+=d+"\r\n")});return c+="--"+b+"--"};(function(a){var b=$.extend({},e,a.call);b.url+="?access_token="+
a.fb.accessToken;var c="separator de campo "+Math.random();b.data=f(a.fb,c);b.contentType="multipart/form-data; boundary="+c;$.ajax(b)})({fb:{caption:c,accessToken:FB.getAccessToken(),file:{name:"sua_mensagem.png",type:"image/png",dataString:b}},call:{url:"https://graph.facebook.com/me/photos",success:function(b){l("Imagem compartilhada!!",a,"informa",8E3);z(!1)},error:function(b){l("Ocorreu um erro ao compartilhar. :( Se estiver no celular, clique e segure na imagem para compartilhar diretamente pelo celular.",
a,"informa_erro",15E3)}}})}else l("Voc\u00ea n\u00e3o autorizou o Sua Mensagem a postar no seu perfil. Se desejar, clique novamente em Compartilhar Imagem.",a,"informa_atencao",12E3)}):l("Voc\u00ea n\u00e3o autorizou o Sua Mensagem a postar no seu perfil. Se desejar, clique novamente em Compartilhar Imagem.",a,"informa_atencao",12E3)}):l("Voc\u00ea n\u00e3o est\u00e1 logado no Facebook. Se desejar, clique novamente em Compartilhar Imagem.",a,"informa_atencao",12E3)},{scope:"publish_actions",return_scopes:!0})})})(self);