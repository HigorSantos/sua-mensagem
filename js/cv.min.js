!function(){"use strict";function a(a,e){var t=a.innerWidth(),s=a.innerHeight(),n=e.outerWidth()/t;e.outerHeight()/s;if(null==n||null==t)return alert("Eita que deu erro. :("),!1;if(n<=1){for(;e.outerWidth()<t;)o&&console.log("outerWidth < winH"),u++,a.css("font-size",u+"px"),e.css("font-size",u+"px");for(;e.outerHeight()>s;)o&&console.log("outerHeight > winH"),u--,a.css("font-size",u+"px"),e.css("font-size",u+"px")}else{for(;e.outerWidth()>t;)o&&console.log("fntSz--(1)"),u--,a.css("font-size",u+"px"),e.css("font-size",u+"px");for(;e.outerHeight()>s;)o&&console.log("fntSz--(2)"),u--,a.css("font-size",u+"px"),e.css("font-size",u+"px")}return o&&console.log("FIM SCALE"),!0}function e(){$("#bloco").removeClass(),$("#bloco").addClass(r).addClass(i).addClass(n).addClass(c).addClass(d).addClass(f)}function t(a,e){a.text($("label."+e).text()).removeClass().addClass(e).addClass("escolhido")}var o=!1,s={fonte:"oswald",forca:"forca_normal",escrita:"escrita_maiuscula",sombra:"",background:"none",formato:"form_quadrado"};o&&(s={fonte:"cormorant",forca:"forca_normal",escrita:"escrita_maiuscula",sombra:"sombra",background:"none",formato:"form_quadrado"});var n=s.fonte,i=s.forca,r=s.escrita,c=s.sombra,l="inverte",d=s.background,f=s.formato,h="",u=120,g=180,m=$("#contador"),p=$("<span/>").append($("<em/>").text("Carregando...")).css("display","none");$("#imagem_final").attr("src",""),e(),$("#bloco").append(p),$("#"+n).attr("checked","checked"),$("#"+i).attr("checked","checked"),$("#"+r).attr("checked","checked"),m.text("0/"+g),$("#btn_gera_imagem").on("click",function(){var e=$("#bloco"),t=$("#onde"),s=$("#texto");if(""!=s.val()){e.css("display","table-cell"),t.text("");var n=s.val();n=n.replace(/\n/g,"<br/>"),n=n.replace(/' '/g,"&nbsp;");var i=n.indexOf("#"),r=n.lastIndexOf("#");if(i!=r){var c=n.substring(0,i);c+='<span class="'+l+'">',c+=n.substring(i+1,r),c+="</span>",c+=n.substring(r+1,n.length),n=c}n=n.replace(/<3/g,"&#9829;"),n=n.replace(/<\/3/g,"&#128148;").replace(/<,3/g,"&#128148;"),n=n.replace(/:\)/g,"&#9786;"),n=n.replace(/:\(/g,"&#9785;"),t.html(n),p.fadeIn(),a(e,t)&&html2canvas(e,{background:"#fff",logging:o,onrendered:function(a){h=a.toDataURL("image/png",.9),$("#imagem_final").attr("src",h),o||$("#imagem_final").css("display","block"),$("#comentario").fadeIn()}}),p.fadeOut(),o||e.css("display","none")}}),$("input").on("click",function(){$("#onde").text(""),"fonte"==$(this).attr("name")&&(n=$(this).val(),e(),t($("#fonte_escolhida"),n)),"forca"==$(this).attr("name")&&(i=$(this).val(),e(),t($("#forca_escolhida"),i)),"escrita"==$(this).attr("name")&&(r=$(this).val(),e(),t($("#escrita_escolhida"),r)),"background"==$(this).attr("name")&&(d=$(this).val(),e(),t($("#fundo_escolhida"),d)),"formato"==$(this).attr("name")&&(f=$(this).val(),$("#imagem_final").removeClass().addClass(f),e(),t($("#formato_escolhida"),f)),"exibe_marca"==$(this).attr("name")&&($(this).prop("checked")?$("#marca").hide():$("#marca").show())}),$("textarea").on("input",function(){var a=$(this).val();a.length>g?(a=a.slice(0,g),$(this).val(a),m.text("Sem textão!!").fadeOut(2e3,function(){m.text(a.length+"/"+g)}).fadeIn()):m.text(a.length+"/"+g)});var x=!1;$("#det_coisas_legais").on("click",function(){x?($("#coisas_legais").slideUp(),$(this).text("Ah, olha o que da pra fazer de legal!")):($("#coisas_legais").slideDown(),$(this).text("Bacana né? [clique aqui para esconder]")),x=!x}),$(".opc").on("click",function(){var a=$(this).attr("id");"none"==$("."+a).css("display")?$("."+a).slideDown():$("."+a).slideUp()}),function(){var a="img/",e=2,t=0;for(t=1;t<=e;t++)$(".img_ex"+t).attr("src",a+"ex"+t+".jpg")}()}(self);